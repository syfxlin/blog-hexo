<!DOCTYPE html>

<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <!--
        hexo-theme-suka Â© SukkaW
        GitHub: https://github.com/SukkaW/hexo-theme-suka
    -->

    <!-- ### Resource Hint ### -->

    <!-- ## DNS Prefetch ## -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

<!-- busuanzi -->

    <link rel="dns-prefetch" href="//busuanzi.ibruce.info">


<!-- comment -->







<!-- analytics -->







    <!-- ## Preload ## -->
    
    <!-- Busuanzi -->
    
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" as="script">







    <!-- ### Meta & Title & Info ### -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <meta name="renderer" content="webkit">

    <!-- Title -->
    <title>æµ…è°ˆæµè§ˆå™¨Event Loop | é’ç©ºä¹‹è“</title>

    <!-- Favicons -->
    <link rel="icon" type="image&#x2F;ico" href="/image/favicon.png">

    <!-- ### Import File ### -->
    <link rel="stylesheet" href="/lib/spectre/spectre.min.css"><style>
    body {
        background-color: #f8f9fa;
    }

    a, a:visited {
        color: #0070ff;
    }

    a:active, a:focus, a:hover {
        color: #0070ff;
        opacity: .75;
    }

    #post-content a,
    #post-content a:hover,
    #post-content a:focus,
    #post-content a:visited {
        color: #005eb9;
        opacity: 1;
    }

    

    .post-entry .card-body a {
        color: #0070ff;
    }

    .avatar {
        background: #444;
    }

    .navbar-link,
    .navbar-link:visited,
    .timeline .timeline-item .timeline-icon.icon-lg {
        color: #0070ff;
    }

    .navbar-link:hover {
        color: #0070ff;
        opacity: .8;
    }

    #search-input .btn,
    #disqus_click_btn,
    #disqus-switch-to-direct,
    #disqus-loadmore-button {
        background: #727e96;
        border-color: #727e96;
        color: #fff;
    }

    #post-toc a.post-toc-link,
    #post-toc a.post-toc-link:visited,
    .share-menu.menu .menu-item>a {
        color: #727e96;
    }

    .share-menu.menu .menu-item>a:hover,
    .share-menu.menu .menu-item>a:focus,
    .share-menu.menu .menu-item>a:visited {
        color: #50596c;
        background: #f8f9fa;
        opacity: .85;
    }
</style><link rel="stylesheet" href="/css/style.min.css">




    <!-- prism.css -->
    
    <link rel="preload" href="/lib/prism/prism-line-numbers.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="/lib/prism/prism-line-numbers.min.css"></noscript><link rel="preload" href="/lib/prism/prism-okaidia.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="/lib/prism/prism-okaidia.min.css"></noscript>









<script>
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
!function(t){"use strict";t.loadCSS||(t.loadCSS=function(){});var e=loadCSS.relpreload={};if(e.support=function(){var e;try{e=t.document.createElement("link").relList.supports("preload")}catch(t){e=!1}return function(){return e}}(),e.bindMediaToggle=function(t){var e=t.media||"all";function a(){t.addEventListener?t.removeEventListener("load",a):t.attachEvent&&t.detachEvent("onload",a),t.setAttribute("onload",null),t.media=e}t.addEventListener?t.addEventListener("load",a):t.attachEvent&&t.attachEvent("onload",a),setTimeout(function(){t.rel="stylesheet",t.media="only x"}),setTimeout(a,3e3)},e.poly=function(){if(!e.support())for(var a=t.document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n];"preload"!==o.rel||"style"!==o.getAttribute("as")||o.getAttribute("data-loadcss")||(o.setAttribute("data-loadcss",!0),e.bindMediaToggle(o))}},!e.support()){e.poly();var a=t.setInterval(e.poly,500);t.addEventListener?t.addEventListener("load",function(){e.poly(),t.clearInterval(a)}):t.attachEvent&&t.attachEvent("onload",function(){e.poly(),t.clearInterval(a)})}"undefined"!=typeof exports?exports.loadCSS=loadCSS:t.loadCSS=loadCSS}("undefined"!=typeof global?global:this);
</script>

    <!-- ### Site Verification ### -->
    


    <meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="é’ç©ºä¹‹è“"><meta name="msapplication-starturl" content="https://hexo.ixk.me"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="é’ç©ºä¹‹è“"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- ### The Open Graph & Twitter Card Protocol ### -->
    <meta property="og:title" content="æµ…è°ˆæµè§ˆå™¨Event Loop | é’ç©ºä¹‹è“"><meta property="og:site_name" content="é’ç©ºä¹‹è“"><meta property="og:type" content="article"><meta property="og:url" content="https:&#x2F;&#x2F;hexo.ixk.me&#x2F;talking-about-browser-event-loop.html"><meta property="og:locale" content="zh-CN"><meta name="description" content="ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿè‹¥ä½ äº†è§£è¿‡JavaScriptï¼Œä½ ä¸€å®šçŸ¥é“JavaScriptæ˜¯ä¸€ç§å•çº¿ç¨‹è¯­è¨€ï¼Œä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¤šçº¿ç¨‹å‘¢ï¼ŸJavaScriptä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ˆè™½ç„¶ç°åœ¨ä¹Ÿåœ¨åç«¯æŒºæµè¡Œçš„ï¼‰ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è‹¥ä½¿ç”¨å¤šçº¿ç¨‹å°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ›´æ–°ä¸¢å¤±ç­‰é—®é¢˜ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¦åˆ é™¤DOMçš„æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹è¦æ›´æ”¹å®ƒï¼Œé‚£æµ - Otstar Lin - é’ç©ºä¹‹è“"><meta name="keywords" content="JavaScript, å‰ç«¯"><meta property="og:image" content="https:&#x2F;&#x2F;blog.ixk.me&#x2F;wp-content&#x2F;uploads&#x2F;2019&#x2F;10&#x2F;image.png"><meta property="article:published_time" content="2019-10-15T14:50:42.000Z"><meta property="article:modified_time" content="2019-12-19T00:32:23.147Z"><meta property="og:updated_time" content="2019-12-19T00:32:23.147Z"><meta property="article:author" content="Otstar Lin"><meta property="article:tag" content="JavaScript, å‰ç«¯"><meta name="twitter:card" content="summary">

    

    <!-- ### Canonical link ### -->
    <link rel="canonical" href="https://hexo.ixk.me/talking-about-browser-event-loop.html">

    <meta name="generator" content="Hexo 4.0.0">

    <!-- ### Analytics ### -->
    







    <!-- ### Structured Data ### -->
    



<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "https://hexo.ixk.me/talking-about-browser-event-loop.html",
    "@type": "BlogPosting",
    "logo": "https://hexo.ixk.me/image/favicon.png",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://hexo.ixk.me/talking-about-browser-event-loop.html"
    },
    "headline": "æµ…è°ˆæµè§ˆå™¨Event Loop | é’ç©ºä¹‹è“",
    
    "image": {
        "@type": "ImageObject",
        "url": "https://hexo.ixk.me/image/favicon.png"
    },
    
    "datePublished": "2019-10-15T14:50:42.000Z",
    "dateModified": "2019-12-19T00:32:23.147Z",
    "author": {
        "@type": "Person",
        "name": "Otstar Lin",
        "image": {
            "@type": "ImageObject",
            "url": "https://hexo.ixk.me/image/avatar-lite.png"
        },
        "description": "ç«™åœ¨æ—¶å…‰ä¸€ç«¯ï¼Œå›å¿†è¿‡å¾€è®°å¿†ã€‚"
    },
    "publisher": {
        "@type": "Organization",
        "name": "é’ç©ºä¹‹è“",
        "logo": {
            "@type": "ImageObject",
            "url": "https://hexo.ixk.me/image/favicon.png"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https://hexo.ixk.me/search?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": "JavaScript, å‰ç«¯",
    "description": "ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿè‹¥ä½ äº†è§£è¿‡JavaScriptï¼Œä½ ä¸€å®šçŸ¥é“JavaScriptæ˜¯ä¸€ç§å•çº¿ç¨‹è¯­è¨€ï¼Œä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¤šçº¿ç¨‹å‘¢ï¼ŸJavaScriptä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ˆè™½ç„¶ç°åœ¨ä¹Ÿåœ¨åç«¯æŒºæµè¡Œçš„ï¼‰ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è‹¥ä½¿ç”¨å¤šçº¿ç¨‹å°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ›´æ–°ä¸¢å¤±ç­‰é—®é¢˜ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¦åˆ é™¤DOMçš„æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹è¦æ›´æ”¹å®ƒï¼Œé‚£æµ - Otstar Lin - é’ç©ºä¹‹è“"
}
</script>



    <!-- ### Custom Head ### -->
    
</head>

    <body>
            

            <!-- ### Main content ### -->
            <!-- ## Header ##-->
<header>
    <h1 class="header-title text-center"><a href="/">é’ç©ºä¹‹è“</a></h1>

    <p class="text-center header-slogan">
        
            
                ç«™åœ¨æ—¶å…‰ä¸€ç«¯ï¼Œå›å¿†è¿‡å¾€è®°å¿†ã€‚
            
        
    </p>

    <nav class="navbar-section text-center">
    
        <a href="/" class="navbar-link">é¦–é¡µ</a>
    
    
        <a href="/archives/" class="navbar-link">å½’æ¡£</a>
    
    
        <a href="/search" class="navbar-link">æœç´¢</a>
    
    
    
        <div class="dropdown dropdown-right">
    <a class="navbar-link dropdown-toggle" tabindex="0">åˆ†äº«</a>
    <ul class="menu share-menu">

        <!-- Share Weibo -->
        
        <li class="menu-item">
            <a href="http://service.weibo.com/share/share.php?appkey=&title=é’ç©ºä¹‹è“&url=https://hexo.ixk.me&pic=https://hexo.ixk.me/image/favicon.png&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ°å¾®åš</a>
        </li>
        

        <!-- Share Twitter -->
        
        <li class="menu-item">
            <a href="https://twitter.com/intent/tweet?text=é’ç©ºä¹‹è“&url=https://hexo.ixk.me&via=Otstar Lin" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Twitter</a>
        </li>
        

        <!-- Share Facebook -->
        
        <li class="menu-item">
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://hexo.ixk.me" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Facebook</a>
        </li>
        

        <!-- Share Google+ -->
        
        <li class="menu-item">
            <a href="https://plus.google.com/share?url=https://hexo.ixk.me" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Google+</a>
        </li>
        

        <!-- Share LinkedIn -->
        
        <li class="menu-item">
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://hexo.ixk.me&title=æµ…è°ˆæµè§ˆå™¨Event Loop" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° LinkedIn</a>
        </li>
        

        <!-- Share QQ -->
        
        <li class="menu-item">
            <a href="http://connect.qq.com/widget/shareqq/index.html?site=é’ç©ºä¹‹è“&title=æµ…è°ˆæµè§ˆå™¨Event Loop&summary=Hiï¼Œæ¬¢è¿æ¥åˆ°Otstar Linçš„ä¸ªäººåšå®¢ï¼Œæ¥è‡ªç¦å»ºæ³‰å·çš„èœé¸Ÿï¼Œåšå®¢å†…å®¹ä¸»è¦ä»¥Linuxå’ŒWebä¸ºä¸»ï¼Œå“å‘€ï¼Œå®åœ¨å†™ä¸ä¸‹å»äº†_(:Ğ·ã€âˆ )_&pics=https://hexo.ixk.me/image/favicon.png&url=https://hexo.ixk.me" target="_blank" rel="external noopener noreferrer nofollow"> åˆ†äº«åˆ° QQ</a>
        </li>
        

        <!-- Share Telegram -->
        
        <li class="menu-item">
            <a href="https://t.me/share/url?url=https://hexo.ixk.me&text=æµ…è°ˆæµè§ˆå™¨Event Loop" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Telegram</a>
        </li>
        

        <!-- QRCode -->
        
        <li class="menu-item">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAAAAABQV18IAAAB30lEQVR42u3a0W7EIAxE0fz/T7evqwh7xqu0gsnNS6vdBE4kFozx9bPhdYECBQrUAnU11/2eZUPNs6s22n5AxaCqzu7/3+9dNXx/ierZZT+golDVIFWgrh31Paj3oqrJsxvEbnug3o2qFthq0f6XgQ5qW5QaxKsOFODPogRQ26Oc4P+Jv4/tZkBtjZJJh2ZBdhfjx7MuoLZGdQPRRXaT5aR9UBkotRGoGu8mXxUEyiAPVBRKBXfThXu0gQUVgeomwmqAd4N3ch+ofJQK8h2snCCLz0HloLpDRmcydYAqgQYqD/XN5tM5gKxernwWVARKDU6V0K8CQHVgOVqQQR2Fmh5MO4fg7oQqN6OgjkSpg0N1ODTdyLYvDioGpRIVKlGmiiTsQQ8qBqUSrZOD627xlRtcUFEot9hmWgihkKAyUW6CwzkschIZ5Q8IVAyqGpwq8e8MXncSBpWHmhSRfpPksAJEUHGoySToLMxWcaBbZQ3qGJRTKNh9pjpUh5eg8lDTwSiLaAYFOtbGAdSRKCco6yZIN0iUPwxQUSi3IGu6KVDFhaDeiaoCfufgUgWMoN6JshJeg4OjMqAEFYVSG4ZJ8UPXuV3QDOpolFo0VcJ1WphqJWJBHYva6QIFChSoj+sXaJYwj2YuTzQAAAAASUVORK5CYII=" alr="QRCode">
        </li>
        

    </ul>
</div>
    
    
</nav>
</header>

            
    <!-- ## Post ## -->
    <div class="post-container">
    <div id="post-card" class="card">
        
        <div class="card-item-container">
            <div class="card-inner-cell">
                <!-- # Post Header Info # -->
                <div class="card-header">
                    
    <h1 class="card-title h3 mb-2">æµ…è°ˆæµè§ˆå™¨Event Loop</h1>




<div class="post-header-info">
    <p class="post-header-info-left text-gray">
        <img class="author-thumb lazyload" data-src="/image/avatar-lite.png" src="/img/suka-lazyload.gif" alt="Otstar Lin's Avatar">
        <span>2019-10-15</span>
        
            <span class="suka-devide-dot"></span>
            <a class="category-link" href="/categories/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/">æŠ˜è…¾è®°å½•</a>
        
        
            <!-- Busuanzi Post Views -->
<span id="busuanzi_container_page_pv" hidden>
    <span class="suka-devide-dot"></span>
    <span></span>
    <span id="busuanzi_value_page_pv"></span>
    <span>Views</span>
</span>
        
        
    </p>
    <div class="post-header-info-right">
        
            <div class="dropdown dropdown-right">
<a class="dropdown-toggle" tabindex="0">åˆ†äº«æœ¬æ–‡</a>
<ul class="menu share-menu">
    <!-- Share Weibo -->
    
    <li class="menu-item">
        <a href="http://service.weibo.com/share/share.php?appkey=&title=æµ…è°ˆæµè§ˆå™¨Event Loop&url=https://hexo.ixk.me/talking-about-browser-event-loop.html&pic=https://hexo.ixk.me/image/favicon.png&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ°å¾®åš</a>
    </li>
    

    <!-- Share Twitter -->
    
    <li class="menu-item">
        <a href="https://twitter.com/intent/tweet?text=æµ…è°ˆæµè§ˆå™¨Event Loop&url=https://hexo.ixk.me/talking-about-browser-event-loop.html&via=Otstar Lin" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Twitter</a>
    </li>
    

    <!-- Share Facebook -->
    
    <li class="menu-item">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://hexo.ixk.me/talking-about-browser-event-loop.html" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Facebook</a>
    </li>
    

    <!-- Share Google+ -->
    
    <li class="menu-item">
        <a href="https://plus.google.com/share?url=https://hexo.ixk.me/talking-about-browser-event-loop.html" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Google+</a>
    </li>
    

    <!-- Share LinkedIn -->
    
    <li class="menu-item">
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://hexo.ixk.me/talking-about-browser-event-loop.html&title=é’ç©ºä¹‹è“" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° LinkedIn</a>
    </li>
    

    <!-- Share QQ -->
    
    <li class="menu-item">
        <a href="http://connect.qq.com/widget/shareqq/index.html?site=é’ç©ºä¹‹è“&title=é’ç©ºä¹‹è“&summary=Hiï¼Œæ¬¢è¿æ¥åˆ°Otstar Linçš„ä¸ªäººåšå®¢ï¼Œæ¥è‡ªç¦å»ºæ³‰å·çš„èœé¸Ÿï¼Œåšå®¢å†…å®¹ä¸»è¦ä»¥Linuxå’ŒWebä¸ºä¸»ï¼Œå“å‘€ï¼Œå®åœ¨å†™ä¸ä¸‹å»äº†_(:Ğ·ã€âˆ )_&pics=https://hexo.ixk.me/image/favicon.png&url=https://hexo.ixk.me/talking-about-browser-event-loop.html" target="_blank" rel="external noopener noreferrer nofollow"> åˆ†äº«åˆ° QQ</a>
    </li>
    

    <!-- Share Telegram -->
    
    <li class="menu-item">
        <a href="https://t.me/share/url?url=https://hexo.ixk.me/talking-about-browser-event-loop.html&text=é’ç©ºä¹‹è“" target="_blank" rel="external noopener noreferrer nofollow">åˆ†äº«åˆ° Telegram</a>
    </li>
    

    <!-- QRCode -->
    
    <li class="menu-item">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAAAAABQV18IAAAB30lEQVR42u3a0W7EIAxE0fz/T7evqwh7xqu0gsnNS6vdBE4kFozx9bPhdYECBQrUAnU11/2eZUPNs6s22n5AxaCqzu7/3+9dNXx/ierZZT+golDVIFWgrh31Paj3oqrJsxvEbnug3o2qFthq0f6XgQ5qW5QaxKsOFODPogRQ26Oc4P+Jv4/tZkBtjZJJh2ZBdhfjx7MuoLZGdQPRRXaT5aR9UBkotRGoGu8mXxUEyiAPVBRKBXfThXu0gQUVgeomwmqAd4N3ch+ofJQK8h2snCCLz0HloLpDRmcydYAqgQYqD/XN5tM5gKxernwWVARKDU6V0K8CQHVgOVqQQR2Fmh5MO4fg7oQqN6OgjkSpg0N1ODTdyLYvDioGpRIVKlGmiiTsQQ8qBqUSrZOD627xlRtcUFEot9hmWgihkKAyUW6CwzkschIZ5Q8IVAyqGpwq8e8MXncSBpWHmhSRfpPksAJEUHGoySToLMxWcaBbZQ3qGJRTKNh9pjpUh5eg8lDTwSiLaAYFOtbGAdSRKCco6yZIN0iUPwxQUSi3IGu6KVDFhaDeiaoCfufgUgWMoN6JshJeg4OjMqAEFYVSG4ZJ8UPXuV3QDOpolFo0VcJ1WphqJWJBHYva6QIFChSoj+sXaJYwj2YuTzQAAAAASUVORK5CYII=" alt="QRCode">
    </li>
    

</ul>
</div>
        
    </div>
</div>
                </div>
                <div class="card-body">
                    
                        
                        
                            <div id="post-toc"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä»€ä¹ˆæ˜¯-Event-Loopï¼Ÿ"><span class="post-toc-number">1.</span> <span class="post-toc-text">ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#MacroTaskå’ŒMicroTask"><span class="post-toc-number">2.</span> <span class="post-toc-text">MacroTaskå’ŒMicroTask</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Promise"><span class="post-toc-number">3.</span> <span class="post-toc-text">Promise</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#async-await"><span class="post-toc-number">4.</span> <span class="post-toc-text">async/await</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¸€ä¸ªæœ‰ç”¨çš„ğŸŒ°"><span class="post-toc-number">5.</span> <span class="post-toc-text">ä¸€ä¸ªæœ‰ç”¨çš„ğŸŒ°</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç»“è¯­"><span class="post-toc-number">6.</span> <span class="post-toc-text">ç»“è¯­</span></a></li></ol></div>
                        
                    
                    <article id="post-content">
                        <h2 id="ä»€ä¹ˆæ˜¯-Event-Loopï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Event-Loopï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿ</h2><p>è‹¥ä½ äº†è§£è¿‡JavaScriptï¼Œä½ ä¸€å®šçŸ¥é“JavaScriptæ˜¯ä¸€ç§å•çº¿ç¨‹è¯­è¨€ï¼Œä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¤šçº¿ç¨‹å‘¢ï¼ŸJavaScriptä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ˆè™½ç„¶ç°åœ¨ä¹Ÿåœ¨åç«¯æŒºæµè¡Œçš„ï¼‰ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è‹¥ä½¿ç”¨å¤šçº¿ç¨‹å°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ›´æ–°ä¸¢å¤±ç­‰é—®é¢˜ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¦åˆ é™¤DOMçš„æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹è¦æ›´æ”¹å®ƒï¼Œé‚£æµè§ˆå™¨è¯¥å¦‚ä½•æ“ä½œå‘¢ã€‚æ‰€ä»¥JavaScriptä¸ºäº†é¿å…å¤šçº¿ç¨‹å¸¦æ¥çš„ä¸€ç³»åˆ—é—®é¢˜é‡‡ç”¨äº†å•çº¿ç¨‹çš„è¿è¡Œæœºåˆ¶ã€‚</p>
<p>è€Œè‹¥åªæ˜¯å•çº¯çš„åŒæ­¥å•çº¿ç¨‹çš„æ‰§è¡Œä¾¿ä¼šå¯¼è‡´JSè¿è¡Œåˆ°æŸä¸ªéœ€è¦ç­‰å¾…çš„ä½ç½®æ—¶å°±ä¼šé€ æˆå‡æ­»çŠ¶æ€ï¼Œæ¯”å¦‚å½“JSè¦ä»ç½‘ç»œä¸­è·å–ä¸€å¼ å·¨å¤§çš„å›¾ç‰‡ï¼Œå‘èµ·äº†HTTPè¯·æ±‚ï¼Œåœ¨ç­‰å¾…HTTPè¯·æ±‚ä¸­è‹¥æ˜¯ä¸é‡‡ç”¨æŸç§æœºåˆ¶æ¥å¤„ç†çš„è¯å°±ä¼šå¯¼è‡´å¡ä½çš„å‡æ­»çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Javaæ¥æ¨¡æ‹Ÿä¸€ä¸‹:</p>
<pre class="line-numbers highlight language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo01</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// æ‰“å°è¯¥å¥æ‰§è¡Œçš„æ—¶é—´</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"begin: "</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token comment" spellcheck="true">// åˆ©ç”¨sleepæ¨¡æ‹Ÿè¯·æ±‚æ—¶çš„çŠ¶æ€</span>
         Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment" spellcheck="true">// æ‰“å°è¯¥å¥æ‰§è¡Œçš„æ—¶é—´</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"end: "</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://blog.ixk.me/wp-content/uploads/2019/10/image.png" alt=""></p>
<p>ä»ä¸Šé¢çš„è¿è¡Œç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒåŒæ­¥è¿è¡Œçš„æ—¶å€™Javaåœ¨beginå’Œendä¸­é—´éš”äº†éå¸¸ä¹…çš„æ—¶é—´ï¼Œç¨‹åºä¹Ÿåœ¨é‚£æ—¶å€™<strong>è¢«é˜»å¡ä½äº†</strong>ï¼Œè€ŒUIæ˜¯ä¸èƒ½è¢«é˜»å¡çš„å¦åˆ™ä¼šä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥JSé‡‡ç”¨<strong>å¼‚æ­¥</strong>æ¥é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚</p>
<p>å½“JSçº¿ç¨‹æ‰§è¡Œåˆ°éœ€è¦<strong>å¼‚æ­¥</strong>çš„æ“ä½œçš„æ—¶å€™å°±ä¼šæŠŠè¯¥ä»»åŠ¡å‘åˆ°<strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œç„¶åç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå½“æ‰€æœ‰çš„<strong>åŒæ­¥ä»£ç éƒ½æ‰§è¡Œå®Œæ¯•</strong>çš„æ—¶å€™ï¼ŒJSçº¿ç¨‹å°±ä¼šä»ä»»åŠ¡é˜Ÿåˆ—è¯»å–ä»»åŠ¡å¹¶æ‰§è¡Œï¼Œè‹¥é‡åˆ°å¼‚æ­¥æ“ä½œå°±ç»§ç»­<strong>å…¥é˜Ÿ</strong>ã€‚ã€‚ã€‚å¦‚æ­¤å¾€å¤ï¼Œè¿™å°±æ˜¯<strong>Event Loop(äº‹ä»¶å¾ªç¯)</strong>ã€‚</p>
<h2 id="MacroTaskå’ŒMicroTask"><a href="#MacroTaskå’ŒMicroTask" class="headerlink" title="MacroTaskå’ŒMicroTask"></a>MacroTaskå’ŒMicroTask</h2><p><strong>MacroTaskï¼ˆå®ä»»åŠ¡ï¼‰</strong>å’Œ<strong>MicroTaskï¼ˆå¾®ä»»åŠ¡ï¼‰ï¼Œ</strong>å®ä»»åŠ¡æ˜¯ä¸€ä¸ªå¤§ä»»åŠ¡ï¼Œåœ¨ä¸€ä¸ªå®ä»»åŠ¡åŒ…å«ç€è®¸å¤šä¸ªå¾®ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è®¤ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å°±ä»£è¡¨ç€äº‹ä»¶å¾ªç¯ï¼Œè€Œå®ä»»åŠ¡ä¸­çš„Promiseè¿˜ä¼šäº§ç”Ÿå¼‚æ­¥ä»£ç ï¼ŒJavaScriptå¿…é¡»ä¿è¯è¿™äº›å¼‚æ­¥ä»£ç åœ¨ä¸€ä¸ªå®è§‚ä»»åŠ¡ä¸­å®Œæˆï¼Œæ‰€ä»¥æ¯ä¸ªå®ä»»åŠ¡ä¸­åŒ…å«äº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚åœ¨å®ä»»åŠ¡ä¸­äº§ç”Ÿçš„å¼‚æ­¥æ“ä½œä¼šæ·»åŠ åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œåœ¨æœ¬tickä¸­å®Œæˆã€‚ä¸¾ä¸ªğŸŒ°å§ï¼š</p>
<ul>
<li>æ‰§è¡Œhtmlä¸­å¼•ç”¨çš„jsä»£ç ï¼Œç¢°åˆ°å®ä»»åŠ¡çš„æ—¶å€™å°±æŠŠå®ä»»åŠ¡æ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°å¾®ä»»åŠ¡å°±åœ¨è¿™ä¸ªtickä¸­æ‰§è¡Œå®Œæ¯•ï¼Œå…¨å±€çš„jsæ‰§è¡Œå®Œæ¯•åè°ƒç”¨æ ˆä¼šæ¸…ç©º</li>
<li>ä»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºé˜Ÿé¦–ä»»åŠ¡ï¼Œæ‰§è¡Œï¼Œé‡åˆ°å¾®ä»»åŠ¡å°±æ·»åŠ åˆ°è¯¥å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œåœ¨æœ¬tickä¸­å®Œæˆï¼Œé‡åˆ°å®ä»»åŠ¡å°±æ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—å°¾éƒ¨ã€‚</li>
<li>å–å‡ºè¯¥å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡ï¼Œé€ä¸ªæ‰§è¡Œï¼Œå¦‚æœé‡åˆ°å®ä»»åŠ¡å°±æ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°å¾®ä»»åŠ¡å°±æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç›´åˆ°è¯¥å®ä»»åŠ¡ä¸­å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼Œåˆ™ä»£è¡¨è¯¥å®ä»»åŠ¡å®Œæˆ</li>
<li>å–å‡ºä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰§è¡Œã€‚ã€‚ã€‚é‡å¤2-3æ­¥</li>
<li>å–å‡ºä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰§è¡Œã€‚ã€‚ã€‚é‡å¤2-3æ­¥</li>
</ul>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>Promiseæ˜¯ES6æ–°å¢çš„ä¸€ç§å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼Œå®ƒçš„è¿è¡Œæ–¹å¼æ˜¯å½“éœ€è¦è¿›è¡ŒI/Oï¼Œç­‰å¾…ç­‰å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œä¸è¿”å›ç»“æœè€Œæ˜¯è¿”å›ä¸€ä¸ªpromiseï¼ˆâ€æ‰¿è¯ºâ€ï¼‰ï¼Œå½“è¿™ä¸ªæ‰¿è¯ºå®Œæˆçš„æ—¶å€™ï¼Œå³çŠ¶æ€å˜ä¸º<code>fulfilled</code>æˆ–è€…<code>rejected</code>ï¼Œè¿™ä¸ªpromiseå°±å®šæ ¼äº†ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºè¿”å›å€¼æ˜¯ä¸€æ ·çš„äº†ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•ä½ç½®ä»»ä½•æ—¶é—´åˆ©ç”¨thenå¾—åˆ°è¿™ä¸ªç»“æœï¼ˆè¿”å›å€¼ï¼‰ï¼Œæˆ–è®¸è¿™æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œé‚£å°±ä¸¾ä¸ªğŸŒ°å§ï¼š</p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token string">"foo"</span>

<span class="token keyword">var</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"one call value: "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"one vall re prev: "</span> <span class="token operator">+</span> re<span class="token punctuation">)</span><span class="token punctuation">;</span>
    re<span class="token operator">=</span><span class="token string">"foo2"</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"one call re: "</span> <span class="token operator">+</span> re<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"two call value: "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"two call re: "</span> <span class="token operator">+</span> re<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>promise1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// > [object Promise]</span>
<span class="token comment" spellcheck="true">// > "one call value: foo"</span>
<span class="token comment" spellcheck="true">// > "one vall re prev: foo"</span>
<span class="token comment" spellcheck="true">// > "one call re: foo2"</span>
<span class="token comment" spellcheck="true">// > "two call value: foo"</span>
<span class="token comment" spellcheck="true">// > "two call re: foo2"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä»ä¸Šé¢çš„è¿è¡Œç»“æœå¯ä»¥çœ‹åˆ°reç¡®å®åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨promise1çš„æ—¶å€™è¢«ä¿®æ”¹ä¸ºfoo2ï¼Œä½†æ˜¯å½“ç¬¬äºŒæ¬¡è°ƒç”¨promiseæ—¶çš„valueå¹¶æ²¡æœ‰è·Ÿç€æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´promiseä¸ä¼šå†è°ƒç”¨ç¬¬äºŒæ¬¡ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ç»“æœã€‚</p>
<h2 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h2><p>ES7ä¸­æ·»åŠ äº†asyncå’Œawaitçš„å…³é”®å­—ï¼Œasyncè¿”å›çš„å¿…å®šæ—¶Promiseï¼Œå¯ä»¥ç†è§£ä¸ºå°±æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œawaitæ˜¯ç­‰å¾…Promiseã€‚</p>
<p>asyncå¯ä»¥ä½¿ä¸€ä¸ªå‡½æ•°æˆä¸ºå¼‚æ­¥å‡½æ•°ï¼Œè¿”å›Promiseï¼Œæˆ‘ä»¬å¯ä»¥æŠŠasyncè®¤ä¸ºä½¿new Promiseçš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥å½“å‡½æ•°returnå€¼çš„æ—¶å€™returnçš„ä¸æ˜¯å€¼è€Œæ˜¯Promiseï¼Œè‹¥è¦å¾—åˆ°asyncä¸­returnçš„å€¼å°±éœ€è¦ä½¿ç”¨thenã€‚</p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// > [object Promise]</span>
<span class="token comment" spellcheck="true">// > "hello"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>awaitæ˜¯ç­‰å¾…åé¢ä¸œè¥¿ï¼Œå¯ä»¥æ˜¯Promiseï¼Œå¯ä»¥æ˜¯å€¼ï¼Œå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå½“å¯ä»¥ç›´æ¥å¾—åˆ°å€¼çš„æ—¶å€™awaitä¼šç«‹å³è¿”å›å€¼ï¼Œä½†è‹¥æ˜¯Promiseï¼Œawaitå°±ä¼šå°†jsé˜»å¡ä½ï¼Œç›´åˆ°Promiseå…‘ç°ï¼Œæœ‰äº†awaitï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¼‚æ­¥çš„jså†™æˆåŒæ­¥çš„jsï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³å›è°ƒåœ°ç‹±ã€‚</p>
<h2 id="ä¸€ä¸ªæœ‰ç”¨çš„ğŸŒ°"><a href="#ä¸€ä¸ªæœ‰ç”¨çš„ğŸŒ°" class="headerlink" title="ä¸€ä¸ªæœ‰ç”¨çš„ğŸŒ°"></a>ä¸€ä¸ªæœ‰ç”¨çš„ğŸŒ°</h2><pre class="line-numbers highlight language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sync1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sync_timeout1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//2</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pro_new_timeout'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pro_new'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pro_then'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//3</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pro_timeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//4</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sync_timeout2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sync2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>çœ‹åˆ°è¿™ä¸ªä»£ç ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ™•ï¼Œå…ˆä¸è¦æ”¾åˆ°JSä¸­è¿è¡Œï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸ªçš„è¾“å‡ºï¼Œä½ å¯ä»¥å…ˆä¸çœ‹ä»¥ä¸‹çš„æ­¥éª¤è‡ªå·±æ€è€ƒä¸€ä¸‹ï¼Œæˆ–è®¸èƒ½å¾—åˆ°ä¸å°æ”¶è·ã€‚</p>
<p>é¦–å…ˆï¼Œsync1çš„console.logè‚¯å®šæ˜¯ç¬¬ä¸€ä¸ªè¾“å‡ºçš„ï¼Œè°ƒç”¨æ ˆå…ˆè¿›äº†consoleï¼Œç„¶åå‡ºæ ˆï¼Œæ§åˆ¶å°è¾“å‡º<code>sync1</code></p>
<p>ç„¶åç¨‹åºæ¥åˆ°äº†ç¬¬ä¸€ä¸ªsetTimeoutï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥å®ä»»åŠ¡ï¼Œæ‰€ä»¥æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åè·³è¿‡è¯¥setTimeoutã€‚MacroTask Queue:[setTimeout-1]</p>
<p>æ¥ä¸‹æ¥ç¨‹åºæ¥åˆ°äº†new promiseï¼Œnew promiseæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ä¼šè¿›å…¥åˆ°functionä¸­ï¼Œé‡åˆ°ç¬¬äºŒä¸ªsetTimeoutï¼Œæ­¤æ—¶å°†è¿™ä¸ªsetTimeoutæ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åè·³è¿‡setTimeoutï¼Œæ‰§è¡Œåˆ°console.logï¼Œè¾“å‡º<code>pro_new</code>ï¼Œæ¥ç€é‡åˆ°resolveï¼Œæ˜¯å¾®ä»»åŠ¡å°†å…¶æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åé€€å‡ºfunctionã€‚MacroTask Queue:[setTimeout-1,setTimeout-2]ï¼ŒMicroTask Queue:[resolve]</p>
<p>æ¥ç€é‡åˆ°äº†promiseçš„thenï¼Œè¿™æ˜¯å±äºresolveçš„å›è°ƒï¼Œå½“resolveçŠ¶æ€æ”¹å˜çš„æ—¶å€™æ‰æ‰§è¡Œï¼Œæ‰€ä»¥è·³è¿‡è¯¥éƒ¨åˆ†ã€‚MacroTask Queue:[setTimeout-1,setTimeout-2]ï¼ŒMicroTask Queue:[resolve]</p>
<p>ç„¶ååˆé‡åˆ°äº†ä¸€ä¸ªsetTimeoutï¼ŒåŒæ ·å°†å…¶æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚MacroTask Queue:[setTimeout-1,setTimeout-2,setTimeout-4]ï¼ŒMicroTask Queue:[resolve]</p>
<p>æ¥ç€é‡åˆ°äº†æœ€åä¸€ä¸ªconsole.logï¼Œè¾“å‡º<code>sync2</code>ï¼Œæ­¤æ—¶åŒæ­¥ä»£ç å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</p>
<p>å¾®ä»»åŠ¡åˆ—è¡¨ä¸ä¸ºç©ºï¼Œæ‰€ä»¥éœ€è¦åœ¨è¿™ä¸ªtickä¸­æ‰§è¡Œï¼Œä¸èƒ½å…ˆå–å®ä»»åŠ¡ï¼Œè°ƒç”¨resolveçš„thenï¼Œè¾“å‡º<code>pro_then</code>ï¼ŒåŒæ—¶å°†setTimeoutæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ã€‚MacroTask Queue:[setTimeout-1,setTimeout-2,setTimeout-4,setTimeout-3]ï¼ŒMicroTask Queue:[]</p>
<p>å¾®ä»»åŠ¡é˜Ÿåˆ—ç©ºäº†ï¼Œä»å®ä»»åŠ¡ä¸­å–å‡ºé˜Ÿé¦–çš„ä»»åŠ¡ï¼Œå³setTimeout-1ï¼Œæ‰§è¡Œåè¾“å‡º<code>sync_timeout1</code></p>
<p>å–å‡ºé˜Ÿé¦–ä»»åŠ¡ï¼ŒsetTimeout-2ï¼Œè¾“å‡º<code>pro_new_timeout</code></p>
<p>å–å‡ºé˜Ÿé¦–ä»»åŠ¡ï¼ŒsetTimeout-4ï¼Œè¾“å‡º<code>sync_timeout2</code></p>
<p>å–å‡ºé˜Ÿé¦–ä»»åŠ¡ï¼ŒsetTimeout-3ï¼Œè¾“å‡º<code>pro_timeout</code>ï¼Œæ­¤æ—¶å®ä»»åŠ¡åˆ—è¡¨å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œjså¼•æ“è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚</p>
<ul>
<li>sync1</li>
<li>pro_new</li>
<li>sync2</li>
<li>pro_then</li>
<li>sync_timeout1</li>
<li>pro_new_timeout</li>
<li>sync_timeout2</li>
<li>pro_timeout</li>
</ul>
<p>ä½ ä»¬çŒœå¯¹äº†å—ï¼Ÿåæ­£æˆ‘ç¬¬ä¸€æ¬¡æ˜¯æ²¡çŒœå¯¹ï¼ˆé€ƒ</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>å­¦äº†å¥½ä¹…çš„å‰ç«¯ï¼Œä¹‹å‰å¯¹å¼‚æ­¥åªå¤„äºä¼šç”¨çš„çŠ¶æ€ï¼Œå‰å‡ å¤©åˆšäº†è§£äº†ä¸€ä¸‹JSçš„å¼‚æ­¥ï¼Œåˆšå¥½å¥½ä¹…æ²¡å†™è¿‡æ–‡ç« äº†ï¼Œä¾¿è‡ªå·±æ•´ç†äº†å†™æˆä¸€ç¯‡æ–‡ç« ï¼Œè¾“å‡ºæ‰æ˜¯æœ€å¥½çš„å­¦ä¹ ï¼Œå…¶å®æ˜¯ä¸ºäº†æ°´æ–‡ç« ï¼ˆé€ƒã€‚(ï¿£yâ–½,ï¿£)â•­</p>

                    </article>
                    


    <blockquote id="date-expire-notification" class="post-expired-notify">æœ¬æ–‡æœ€åæ›´æ–°äº <span id="date-expire-num"></span> å¤©å‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜</blockquote>
    <script>
    (function() {
        var dateUpdate = Date.parse("2019-12-19");
        var nowDate = new Date();
        var a = nowDate.getTime();
        var b = a - dateUpdate;
        var daysUpdateExpire = Math.floor(b/(24*3600*1000));
        if (daysUpdateExpire >= 120) {
            document.getElementById('date-expire-num').innerHTML = daysUpdateExpire;
        } else {
            document.getElementById('date-expire-notification').style.display = 'none';
        }
    })();
    </script>


<p class="post-footer-info mb-0 pt-0">æœ¬æ–‡å‘è¡¨äº&nbsp;<time datetime="2019-10-15T14:50:42.000Z" itemprop="datePublished">2019-10-15</time>

    , æœ€åä¿®æ”¹äº&nbsp;<time datetime="2019-12-19T00:32:23.147Z" itemprop="dateModified">2019-12-19</time>

</p>
<p class="post-footer-info mb-0 pt-2">

<span class="post-categories-list mt-2">

<a class="post-categories-list-item" href='/categories/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/'>æŠ˜è…¾è®°å½•</a>

</span>



<span class="post-tags-list mt-2">

<a class="post-tags-list-item" href="/tags/JavaScript/" rel="tag">#&nbsp;JavaScript</a>

<a class="post-tags-list-item" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">#&nbsp;å‰ç«¯</a>

</span>


</p>

                </div>
                <div class="post-nav px-2 bg-gray">
<ul class="pagination">
    <!-- Prev Nav -->
    
        <li class="page-item page-prev">
            <a href="/add-sync-action-for-vuex.html" rel="prev">
                <div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">ä¸ºVuexæ·»åŠ åŒæ­¥Action</div>
            </a>
        </li>
    

    <!-- Next Nav -->
    
        <li class="page-item page-next">
            <a href="/talking-about-bplus-tree.html" rel="next">
                <div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">æµ…è°ˆB+æ ‘</div>
            </a>
        </li>
    
</ul>
</div>

                
                    <!-- # Comment # -->
                    
                
            </div>
        </div>
    </div>
</div>

            <!-- ### Footer ### -->
            <footer class="text-center">
    <!-- footer copyright -->
    
        <p class="footer-copyright mb-0">Copyright&nbsp;Â©&nbsp;<span id="copyright-year"></span>
            <a class="footer-copyright-a" href="https://hexo.ixk.me">é’ç©ºä¹‹è“</a>
        </p>

    <!-- footer custom text -->
    <p class="footer-text mb-0">
    æºç«™ï¼š<a href="https://blog.ixk.me" target="_blank" rel="noopener" style="color:#0070ff">https://blog.ixk.me</a>
    </p>
    <!-- footer develop info -->
    <p class="footer-develop mb-0">
        
    <!-- Busuanzi User Views -->
    <span id="busuanzi_container_site_uv" hidden>
        <span></span>
        <span id="busuanzi_value_site_uv"></span>
        <span>Viewers</span>
        
            <span>|</span>
        
    </span>




        
        Powered by&nbsp;<!--
         --><a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="external nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<!--
         --><a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="external noopener">Suka</a>
    </p>
</footer>


        <!-- ### Import File ### -->
        <!-- ### Footer JS Import ### -->

<script>

    
window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 50
};

(function() {
    var copyrightNow = new Date().getFullYear();
    var copyrightContent = document.getElementById('copyright-year');
    var copyrightSince = 2017;
    if (copyrightSince === copyrightNow) {
        copyrightContent.textContent = copyrightNow;
    } else {
        copyrightContent.textContent = copyrightSince + ' - ' + copyrightNow;
    }
})();
console.log('\n %c Suka Theme (hexo-theme-suka) | Â© SukkaW | Verision 1.3.2 %c https://github.com/SukkaW/hexo-theme-suka \n', 'color: #fff; background: #444; padding:5px 0;', 'background: #bbb; padding:5px 0;');

</script>

<script src="/lib/vanilla-lazyload/lazyload.min.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" async></script>


<!-- Offset -->




<!-- Comment -->


<!-- ### Custom Footer ### -->

    </body>

</html>